<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<title>technical details, natlinkmain_vocola_main</title>
<meta charset="UTF-8">
<meta name="description" content="Natlink and Unimacro, for a Dragon NaturallySpeaking macro facility">
<meta name="keywords" content="Installation, Natlink/Vocola/Unimacro, technical, details, natlinkmain_vocola_main, technical details, Installation Natlink/Vocola/Unimacro">
<meta name="author" content="QH software, training & advies, 2002/2017 (informatie: info at sitegen.nl)">
<link rel="stylesheet" href="../../unimacro.css" type="text/css" title="unimacro.css">
<!--[if lte IE 6]>
<link rel="stylesheet" href="../../unimacroie6.css" type="text/css" title="unimacroie6.css">
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" href="../../unimacroie7.css" type="text/css" title="unimacroie7.css">
<![endif]-->
<!--[if IE 8]>
<link rel="stylesheet" href="../../unimacroie8.css" type="text/css" title="unimacroie8.css">
<![endif]-->
<!--[if IE 9]>
<link rel="stylesheet" href="../../unimacroie9.css" type="text/css" title="unimacroie9.css">
<![endif]-->
<script language="javascript" src="../../unimacro.js" type="text/javascript"></script><link href="/unimacro/favicon.ico" rel="shortcut icon" type="image/x-icon"></head>
<body onload="afterLoad();" onresize="onResize();"><div class="header" id="header"><!-- === start of header === -->

<table border="0" cellpadding="0" cellspacing="0" class="body" width="100%">
<tr><td class="banner">Unimacro</td><td width="30%">&nbsp;</td></tr></table>

<table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td height="15"></td></tr></table>
<div class="topmenuwide"><table border="0" cellspacing="0" class="menu" width="100%"><tr><td align="center" class="topon" height="28" onclick="location='../index.html';" onmouseout="status='';" onmouseover="status='Installation Natlink/Vocola/Unimacro';"><a href="../index.html">Installation Natlink/Vocola/Unimacro</a></td><td class="topspacer" height="28" width="5">&nbsp;</td><td align="center" class="topoff" height="28" onclick="location='../../features/index.html';" onmouseout="status='';" onmouseover="status='Features';"><a href="../../features/index.html">Features</a></td><td class="topspacer" height="28" width="5">&nbsp;</td><td align="center" class="topoff" height="28" onclick="location='../../grammars/index.html';" onmouseout="status='';" onmouseover="status='Grammars';"><a href="../../grammars/index.html">Grammars</a></td><td class="topspacer" height="28" width="5">&nbsp;</td>
<td align="center" class="topoff" height="28" onclick="location='../../aboutunimacro/index.html';" onmouseout="status='';" onmouseover="status='About';"><a href="../../aboutunimacro/index.html">About</a></td></tr></table></div>
<table border="0" cellpadding="0" cellspacing="0" class="navline" width="100%">
<tr><td class="navline"><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td class="navline">&nbsp;<a href="../../index.html">home</a> > <a href="../index.html">installation natlink/vocola/unimacro</a> > <a href="index.html">technical details</a> > natlinkmain_vocola_main</td></tr></table></td></tr></table>

<!-- === end of header === --></div><div class="body" id="divbody"><table cellspacing="0" class="body" width="100%"><tr><td class="leftpart" id="leftpart" width="25%"><table cellspacing="0" class="leftpart" width="100%"><tr><td class="leftmenu" id="leftmenu"><!-- === left menu === -->
<table class="leftmenu" cellspacing="0" width="100%">
<tr><td class="leftoff" colspan="2"><a href="../installationstableversionpython2.html">Installation stable version python2</a></td></tr>

<tr><td class="leftoff" colspan="2"><a href="../installationexperimentalversionpython3.html">Installation experimental version python3</a></td></tr>

<tr><td class="leftoff" colspan="2"><a href="../configuration.html">Configuration</a></td></tr>

<tr><td class="leftoff" colspan="2"><a href="../howtostart.html">How to start</a></td></tr>

<tr><td class="leftoff" colspan="2"><a href="../logofchanges/index.html">Log of changes</a></td></tr>

<tr><td class="leftoff" colspan="2"><a href="../problemswithinstallation.html">Problems with installation?</a></td></tr>

<tr><td class="leftoff" colspan="2"><a href="../problemswithnatlink.html">Problems with NatLink?</a></td></tr>

<tr><td class="leftoff" colspan="2"><a href="../speechmodel.html">Speech Model</a></td></tr>

<tr><td class="leftoff" colspan="2"><a href="../inifilestrategy.html">Ini file strategy</a></td></tr>

<tr><td class="leftoff" colspan="2"><a href="../configureadministratorrights.html">Configure administrator rights</a></td></tr>

<tr><td class="leftoff" colspan="2"><a href="../settinghome/index.html">Setting HOME</a></td></tr>

<tr><td class="lefton" colspan="2"><a href="index.html">Technical details</a></td></tr>
    
<tr><td class="back" width="20">&nbsp;</td><td class="leftoff"><a href="natlinkstatus.html">Natlinkstatus</a></td></tr>

<tr><td class="back" width="20">&nbsp;</td><td class="leftoff"><a href="natlinkconfigfunctions.html">Natlinkconfigfunctions</a></td></tr>

<tr><td class="back" width="20">&nbsp;</td><td class="leftoff"><a href="natlinkcorefunctions.html">Natlinkcorefunctions</a></td></tr>

<tr><td class="back" width="20">&nbsp;</td><td class="leftoff"><a href="configuregui.html">configure GUI</a></td></tr>

<tr><td class="back" width="20">&nbsp;</td><td class="leftoff"><a href="batchmodeforconfiguration.html">Batch mode for configuration</a></td></tr>

<tr><td class="back" width="20">&nbsp;</td><td class="leftoff"><a href="installer.html">Installer</a></td></tr>

<tr><td class="back" width="20">&nbsp;</td><td class="lefton">Natlinkmain_vocola_main</td></tr>

<tr><td class="back" width="20">&nbsp;</td><td class="leftoff"><a href="natlinkmain.html">Natlinkmain</a></td></tr>

<tr><td class="back" width="20">&nbsp;</td><td class="leftoff"><a href="natlinkutils.html">Natlinkutils</a></td></tr>

<tr><td class="back" width="20">&nbsp;</td><td class="leftoff"><a href="nsformat.html">Nsformat</a></td></tr>

<tr><td class="back" width="20">&nbsp;</td><td class="leftoff"><a href="testingnatlink.html">Testing natlink</a></td></tr>

<tr><td class="back" width="20">&nbsp;</td><td class="leftoff"><a href="workingwithsubversion/index.html">Working with subversion</a></td></tr>
</table>

<!-- == end of left menu == --></td></tr></table></td><td class="body0" id="body0" width="76%"><table cellspacing="0" class="body" width="100%"><tr><td class="body" id="body" valign="top"><h1>natlinkmain and _vocola_main</h1>
<p>Natlinkmain controls the calling back at the beginning of each utterance (beginCallback) and after each change of microphone state or change of user (speech profile) (changeCallback, of type "mic" or of type "user").</p>

<h3>beginCallback</h3>
<p>This function is called <strong>before</strong> all the grammar files (in the <strong>userDirectory</strong> - for example Unimacro grammars  - and in the <strong>baseDirectory</strong> -  _vocola_main.py  and grammars that are generated by Vocola) are called back in gotBegin.</p>

<p>Vocola needs a special action at this moment, because when a Vocola user file has been changed, Vocola must run the <strong>vcl2py</strong> procedure in order to produce the appropriate python grammar file.</p>

<p>In order to do this <strong>natlinkmain</strong> calls the function  <strong>_vocola_main.vocolaBeginCallback</strong>. This function can see if anything has been changed. If so runs the <strong>vcl2py</strong> procedure and reports back if a new python grammar file has been made (<strong>2</strong>) or an existing python grammar file has been changed (<strong>1</strong>). If nothing was changed it simply returns <em>None</em>. <strong>Natlinkmain</strong> takes the appropriate action in checking grammar files or loading the new grammar files.</p>

<h3>changeCallback</h3>
<p>When a new user is opened this natlinkmain function runs.  All grammar files are unloaded, and loaded again.  In this procedure <strong>_vocola_main</strong> goes first.  It deletes all grammar files that were generated before, and runs <strong>vcl2py</strong> to make new grammar files.  After this step all the grammar files are loaded.</p>

<h3>What if Vocola is not running</h3>
<p>If Vocola is not active (see in <a href="natlinkconfigfunctions.html">configuration procedure</a>), it should have an instance variable <strong>vocolaEnabled</strong> set to None.  If Vocola is active this variable should be <strong>1</strong>.</p>

<p>So in order to have natlinkmain work correct, _vocola_main.py should be valid and do it least above things.</p>

<h2>Checking for changed Vocola command files</h2>
<p>By default checking for changed Vocola command files is performed at each utterance.</p></td></tr></table></td></tr></table></div><div class="footer" id="footer"><!-- === start of footer === -->

<table border="0" cellpadding="0" cellspacing="0" class="bottomline" width="100%">
<tr><td class="navline"><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td class="navline">&nbsp;<a href="../../index.html">home</a> > <a href="../index.html">installation natlink/vocola/unimacro</a> > <a href="index.html">technical details</a> > natlinkmain_vocola_main > <a href="javascript:scrollTo(0,0);">top</a></td></tr></table></td><td class="sitemapbutton" onclick="location='../../sitemap.html#natlinkmainvocolamain';" onmouseout="status='';" onmouseover="status='go to the sitemap';"><a href="../../sitemap.html#natlinkmainvocolamain">sitemap</a></td><td class="navline" width="5"></td><td class="emailbutton" onclick="" onmouseout="status='';" onmouseover="status='send e-mail';"><noscript class="underline">q.hoogenboom</noscript>
<script language="javascript" type="text/javascript"><!--
m("antenna.nl", "q.hoogenboom", "information about: natlinkmain_vocola_main", "e-mail");

// --></script>
<noscript class="underline">at&nbsp;antenna.nl</noscript></td><td class="navline" width="5"></td><td class="copyright">&copy;&nbsp;<strong>unimacro</strong>,&nbsp;feb 2021</td><td class="copprintonly">&copy;&nbsp;<strong>unimacro</strong>,&nbsp;feb 2021<br> | a SourceForge Project by Quintijn Hoogenboom, Bart Jan van Os, Frank Olaf Sem-Jacobsen, Doug Ransom.</td></tr></table>

<!-- === end of footer === --></div>
<script language="javascript" type="text/javascript"><!--
function onResizeFunctions(){

bodyHeight(170);

}


function onLoadFunctions(){

onResizeFunctions();


return;
}


// --></script>

</body></html>